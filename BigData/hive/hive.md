# Hive面试题

## Hive的定义

> Apache Hive是一款建立在Hadoop之上的开源**数据仓库系统**，可以将存储在Hadoop文件中的结构化、半结构化数据文件映射为一张数据库表，基于表提供了一种类似SQL的查询功能，称为Hive查询语言(HQL)，用于访问和分析存储在Hadoop文件中的大型数据集
>
> Hive核心是将HQL转换为MapReduce程序，然后将程序提交到Hadoop集群执行。
>
> Hive的优点是学习成本低，可以通过类SQL语句快速实现简单的MapReduce统计，不必开发专门的MapReduce应用，十分适合数据仓库的统计分析，但是Hive不支持实时查询。

## Hive和关系型数据库的区别

> | 对比     | Hive                                                         | RDBMS                                |
> | -------- | ------------------------------------------------------------ | ------------------------------------ |
> | 查询语言 | HQL                                                          | SQL                                  |
> | 数据存储 | HDFS                                                         | 块设备或本地文件系统                 |
> | 数据操作 | 早期版本不支持记录级别的增删改（更新）操作，现在版本能够支持，但是实际工作当中不会使用Hive进行增删改，效率太低。 | 一直支持记录级别的增删改（更新）操作 |
> | 执行器   | MapReduce                                                    | Executor                             |
> | 延时     | 高                                                           | 低                                   |
> | 索引     | 支持简单索引                                                 | 支持复杂索引                         |
> | 扩展性   | 高                                                           | 低                                   |
> | 数据规模 | 大                                                           | 小                                   |
> | 应用场景 | 海量数据离线查询                                             | 少量数据实时查询                     |
>
> 

## Hive有哪些方式保存元数据，各有哪些特点？

> Hive支持三种不同的元存储服务器，分别为：内嵌式元存储服务器、本地元存储服务器、远程元存储服务器，每种存储方式使用不同的配置参数。
>
> 1. 内嵌模式：采用内嵌式数据库Derby存储元数据，不需要单独启动metastore服务。在该模式下每次只有一个客户端可以连接到元存储服务器。
> 2. 本地模式：采用外部数据库存储元数据，默认使用MySQL。不需要单独启动metastore服务。hive服务和metastore服务在同一个进程里运行，每启动一个hive服务，默认启动一个metastore服务。
> 3. 远程模式下，采用外部数据库存储元数据，默认使用MySQL。需要单独启动metastore服务，hive服务和metastore服务运行在不同的进程里，metastore服务和客户端之间使用Thrift协议通信。

## Hive内部表和外部表的区别？

> 创建表时：
>
> 1. 创建内部表时，会将数据移动到数据仓库指向的路径
> 2. 创建外部表时，不对数据的位置做任何改变
>
> 删除表时：
>
> 1. 删除内部表时，内部表的元数据和数据会被一起删除
> 2. 删除外部表时，外部表只删除元数据，不删除数据

